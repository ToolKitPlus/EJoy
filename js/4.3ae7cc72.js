(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"9aa1":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"horoscope",attrs:{id:"horoscope"}},[n("div",{staticClass:"container"},[e._m(0),n("div",{staticClass:"nes-container with-title is-centered monitor-tokens"},[n("p",{staticClass:"title"},[e._v("监听通证列表")]),n("label",{attrs:{for:["private-key"]}},[n("p",[e._v("钱包私钥 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.privateKey,expression:"privateKey"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["private-key"],placeholder:["请输入钱包私钥"]},domProps:{value:e.privateKey},on:{input:function(t){t.target.composing||(e.privateKey=t.target.value)}}}),n("label",{attrs:{for:["chain"]}},[n("p",[e._v("钱包私钥 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.chain,expression:"chain"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["chain"],placeholder:["请输入生态链"]},domProps:{value:e.chain},on:{input:function(t){t.target.composing||(e.chain=t.target.value)}}}),n("button",{staticClass:"nes-btn is-primary",attrs:{type:"button"},on:{click:function(t){return e.initWallet()}}},[e._v("初始化钱包")]),n("button",{staticClass:"nes-btn is-error",attrs:{type:"button"},on:{click:function(t){return e.subscribeAllTokenTransfer()}}},[e._v("一键开启监听")]),n("button",{staticClass:"nes-btn is-error",attrs:{type:"button"},on:{click:function(t){return e.tryPushWechat()}}},[e._v("监听测试")]),e._l(e.tokens,(function(t){return n("div",{key:t.tokenName,staticClass:"token-manager"},[n("div",{staticClass:"token-info"},[n("p",[e._v("通证名称")]),e._v("："+e._s(t.tokenName)),n("br"),n("p",[e._v("通证合约")]),e._v("："+e._s(t.tokenContract)),n("br"),n("p",[e._v("监听key")]),e._v("："+e._s(t.key)),n("br"),e.swapConfig[t.chain][t.swap].factoryContract?n("div",[n("p",[e._v("LP流动性")]),e._v("："+e._s((t.lpTokenAName||"loading...")+" : "+(t.lpReserveAReadable||"loading..."))+" / "+e._s(t.tokenName+":"+(t.lpReserveBReadable||"loading..."))+"\n            ")]):e._e()]),n("div",{staticClass:"purchase"},[e.swapConfig[t.chain][t.swap].factoryContract?n("div",{staticClass:"purchase-info"},[n("div",{staticStyle:{"background-color":"#212529",padding:"1rem"}},[n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"},attrs:{for:["inline_field_"+t.tokenName]}},[n("p",[e._v(e._s(t.lpTokenAName||"loading...")+" : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.purchaseAmountIn,expression:"token.purchaseAmountIn"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["inline_field_"+t.tokenName],placeholder:["请输入购买"+(t.lpTokenAName||"loading...")+"花费"]},domProps:{value:t.purchaseAmountIn},on:{input:function(n){n.target.composing||e.$set(t,"purchaseAmountIn",n.target.value)}}})]),n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"},attrs:{for:["inline_field_slippage"+t.tokenName]}},[n("p",[e._v("滑点 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.slippage,expression:"token.slippage"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["inline_field_slippage"+t.tokenName],placeholder:["请输入购买滑点"]},domProps:{value:t.slippage},on:{input:function(n){n.target.composing||e.$set(t,"slippage",n.target.value)}}})]),n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"},attrs:{for:["inline_field_minLPReserve"+t.tokenName]}},[n("p",[e._v("触发交易LP流动性最小值 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.minLPReserve,expression:"token.minLPReserve"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["inline_field_minLPReserve"+t.tokenName],placeholder:["请输入触发交易LP流动性最小值"]},domProps:{value:t.minLPReserve},on:{input:function(n){n.target.composing||e.$set(t,"minLPReserve",n.target.value)}}})]),n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"},attrs:{for:["inline_field_purchaseNum"+t.tokenName]}},[n("p",[e._v("当前购买次数 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.purchaseNum,expression:"token.purchaseNum"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["inline_field_purchaseNum"+t.tokenName],placeholder:["请输入自动购买次数"]},domProps:{value:t.purchaseNum},on:{input:function(n){n.target.composing||e.$set(t,"purchaseNum",n.target.value)}}})]),n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"},attrs:{for:["inline_field_purchaseLimit"+t.tokenName]}},[n("p",[e._v("自动购买次数 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.purchaseLimit,expression:"token.purchaseLimit"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["inline_field_purchaseLimit"+t.tokenName],placeholder:["请输入自动购买次数"]},domProps:{value:t.purchaseLimit},on:{input:function(n){n.target.composing||e.$set(t,"purchaseLimit",n.target.value)}}})]),n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"},attrs:{for:["inline_field_tokenPriceLimit"+t.tokenName]}},[n("p",[e._v("限价交易 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.tokenPriceLimit,expression:"token.tokenPriceLimit"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["inline_field_tokenPriceLimit"+t.tokenName],placeholder:["请输入限价"+(t.lpTokenAName||"loading...")]},domProps:{value:t.tokenPriceLimit},on:{input:function(n){n.target.composing||e.$set(t,"tokenPriceLimit",n.target.value)}}})]),n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"}},[n("p",[e._v(e._s(t.tokenName)+" 购买数量 : ")]),e._v(e._s(t.purchaseAmountOut))])])]),n("div",{staticClass:"nes-field is-inline lazyPurchase",staticStyle:{"background-color":"#212529",padding:"1rem"}},[n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"},attrs:{for:["one-click-token-contract"+t.tokenName]}},[n("p",[e._v("购买通证合约 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.tokenContract,expression:"token.tokenContract"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["one-click-token-contract"+t.tokenName],placeholder:["请输入购买的通证合约"]},domProps:{value:t.tokenContract},on:{input:function(n){n.target.composing||e.$set(t,"tokenContract",n.target.value)}}})]),n("div",[n("button",{staticClass:"nes-btn is-primary",attrs:{type:"button"},on:{click:function(n){return e.lazyPurchase(t)}}},[e._v("一键开启自动购买")])])]),n("div",{staticClass:"purchase-status"},[e._v("\n                自动购买: "+e._s(t.autoPurchase?"开启":"关闭")),n("br"),e._v("\n                是否已初始化: "+e._s(e.hasInit?"已初始化":"未初始化")+"\n              ")]),n("div",{staticClass:"purchase-manager"},[n("button",{staticClass:"nes-btn is-primary",attrs:{type:"button"},on:{click:function(n){return e.manulPurchase(t)}}},[e._v("手动购买")]),n("button",{staticClass:"nes-btn is-success",attrs:{type:"button"},on:{click:function(n){return e.autoPurchaseOpen(t)}}},[e._v("开启自动购买")]),n("button",{staticClass:"nes-btn is-warning",attrs:{type:"button"},on:{click:function(n){return e.autoPurchaseClose(t)}}},[e._v("关闭自动购买")])])]):e._e()])])}))],2),n("div",{staticClass:"nes-container with-title is-centered"},[n("p",{staticClass:"title"},[e._v("状态监测")]),n("p",[e._v(e._s(e.heartbeat))]),n("br"),n("p",[e._v("是否已执行测试："+e._s(e.alreadyTest?"是":"否"))])])]),n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320"}},[n("path",{attrs:{fill:"#242431","fill-opacity":"1",d:"M0,64L48,96C96,128,192,192,288,186.7C384,181,480,107,576,74.7C672,43,768,53,864,69.3C960,85,1056,107,1152,112C1248,117,1344,107,1392,101.3L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"}})])])])},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"partition"},[n("div",{staticClass:"image"}),n("span",{staticClass:"title"},[e._v("占星系统")])])}],s=(n("e6cf"),n("ddb0"),n("3da4")),i=n("c030");const r=n("e8c0"),c=n("e2b0"),l=n("e1bc"),u=n("6f3a"),d=n("dcd2"),p=n("3207"),m=n("dd1f"),h=n("67ae"),f=n("8584"),v=n("15ad"),g={heco:{rpcProvider:"https://http-mainnet.hecochain.com",mdex:{factory:c,router:l,pair:u},dogSwap:{factory:d,router:m,pair:p}},bsc:{rpcProvider:"https://bsc-dataseed1.binance.org",pancakeSwap:{factory:h,router:v,pair:f}}};let w;const k=(e,t)=>{const n=g[e].rpcProvider,a=new i["a"].providers.JsonRpcProvider(n);return w=new i["a"].Wallet(t,a),console.log("wallet address: ",w.address),{wallet:w,address:w.address}},C=(e,t,n)=>{if(void 0===w)return console.warn("wallet not init."),new Promise((function(e,t){t(new Error("wallet not init."))}));console.log("getToken0 params:",n,x(e,t),w);const a=new i["a"].Contract(n,x(e,t),w);return a.token0().then((e=>(console.log("getToken0 success, result:",e),e))).catch((e=>(console.warn("getToken0 error, reason:",e),null)))},b=(e,t,n)=>{if(void 0===w)return console.warn("wallet not init."),new Promise((function(e,t){t(new Error("wallet not init."))}));const a=new i["a"].Contract(n,x(e,t),w);return a.token1().then((e=>(console.log("getToken1 success, result:",e),e))).catch((e=>(console.warn("getToken1 error, reason:",e),null)))},y=e=>{if(void 0===w)return console.warn("wallet not init."),new Promise((function(e,t){t(new Error("wallet not init."))}));const t=new i["a"].Contract(e,r,w);return t.decimals().then((e=>(console.log("getDecimals success, result:",e),e))).catch((e=>(console.warn("getDecimals error, reason:",e),null)))},P=e=>{if(void 0===w)return console.warn("wallet not init."),new Promise((function(e,t){t(new Error("wallet not init."))}));const t=new i["a"].Contract(e,r,w);return t.symbol().then((e=>(console.log("getSymbol success, result:",e),e))).catch((e=>(console.warn("getSymbol error, reason:",e),null)))},_=(e,t,n,a,o)=>{if(void 0===w)return console.warn("wallet not init."),new Promise((function(e,t){t(new Error("wallet not init."))}));console.log("获取交易对合约入参:",e,t,L(e,t),n,a,o);const s=new i["a"].Contract(n,L(e,t),w);return s.getPair(a,o).then((e=>(console.log("getPair success, result:",e),e))).catch((e=>(console.warn("getPair error, reason:",e),null)))},N=(e,t,n,a,o,s)=>{if(void 0===w)return console.warn("wallet not init."),new Promise((function(e,t){t(new Error("wallet not init."))}));const r=new i["a"].Contract(n,T(e,t),w);return r.getAmountOut(a,o,s).then((e=>(console.log("getPurchaseAmountOut success, result:",e),e))).catch((e=>(console.warn("getPurchaseAmountOut error, reason:",e),null)))},A=(e,t,n,a,o,s,r)=>{if(void 0===w)return console.warn("wallet not init."),new Promise((function(e,t){t(new Error("wallet not init."))}));const c=new i["a"].Contract(n,T(e,t),w);return c.swapExactTokensForTokens(a,o,s,w.address,r,{gasLimit:4e5,gasPrice:i["a"].utils.parseUnits("10","gwei")}).then((e=>(console.log("swap success, result:",e),e))).catch((e=>(console.warn("swap error, reason:",e),null)))};function L(e,t){return g[e][t].factory}function T(e,t){return g[e][t].router}function x(e,t){return g[e][t].pair}n("5319");var B=n("a562");const I=function(e,t,n,a){const o='<form method="dialog">\n                                <p class="title">_TITLE_</p>\n                                <div>_MSG_</div>\n                                <menu class="dialog-menu">\n                                  <button class="nes-btn is-primary">_BTN_</button>\n                                </menu>\n                              </form>';E(o.replace("_TITLE_",e).replace("_MSG_",t).replace("_BTN_",n),{className:"nes-dialog",id:a})},E=(e,t)=>{t=Object.assign({modal:!0,className:"",wrap:!1},t);const n=document.createElement("dialog");B["a"].registerDialog(n);const a=t.wrap?document.createElement("div"):n;a!==n&&n.append(a),"string"===typeof e?a.innerHTML=e:a.append(e),t.className&&(n.className=t.className),t.id&&(n.id=t.id);const o=Object.assign(document.createElement("div"),{className:""});return o.append(n),document.body.append(o),n};var R=n("901e"),D=n.n(R),S={name:"HomePage",components:{},data(){return{tokens:[{tokenName:"SPD",key:"e286926df948477882476b7e9867bbb5",tokenContract:"0xBb52481185F50561b2c4a43a480EfF63c3Eaea7a",chain:"bsc",swap:"pancakeSwap",slippage:.2,minLPReserve:3e3,purchaseAmountIn:10,tokenPriceLimit:.1,purchaseNum:1,purchaseLimit:1,autoPurchase:!1}],heartbeat:0,alreadyTest:!1,hasInit:!1,swapConfig:{heco:{xusd:"0x0298c2b32eaE4da002a15f36fdf7615BEa3DA047",usdt:"0xa71EdC38d189767582C38A3145b5873052c3e47a",mdex:{factoryContract:"0xb0b670fc1F7724119963018DB0BfA86aDb22d941",routerContract:"0xed7d5f38c79115ca12fe6c0041abb22f0a06c300"},dogSwap:{factoryContract:"0x0419082bb45f47Fe5c530Ea489e16478819910F3",routerContract:"0x539A9Fbb81D1D2DC805c698B55C8DF81cbA6b350"}},bsc:{xusd:"0xe9e7cea3dedca5984780bafc599bd69add087d56",usdt:"0x55d398326f99059ff775485246999027b3197955",pancakeSwap:{factoryContract:"0xBCfCcbde45cE874adCB698cC183deBcF17952812",routerContract:"0x05fF2B0DB69458A0750badebc4f9e13aDd608C7F"}}},privateKey:null,chain:null,destoryAddress:"0x0000000000000000000000000000000000000000"}},methods:{lazyPurchase:async function(e){const t=this,n=await t.initWallet();if(n)if(t.autoPurchaseOpen(e),e.pairContract=await t.initLPPairContract(e),null!==e.pairContract&&e.pairContract!==t.destoryAddress)await t.initTokenInfo(e),t.subscribeTokenTransfer(e);else{const e=document.getElementById("lp-token-pair-init-fail-dialog");e.showModal()}},initLPPairContract:async function(e){const t=this;if(null!==e.pairContract&&void 0!==e.pairContract)return console.log("已配置LP Pair合约",e.pairContract),e.pairContract;if(null!==e.lpTokenAContract&&void 0!==e.lpTokenAContract){const[n]=await Promise.all([_(e.chain,e.swap,t.swapConfig[e.chain][e.swap].factoryContract,e.lpTokenAContract,e.tokenContract)]);return console.log("指定了LP TokenA合约，则通过该合约获取LP Pair合约",n),n!==t.destoryAddress?n:(console.log("尝试获取LP Pair合约失败, 重试..."),t.initLPPairContract(e))}const[n]=await Promise.all([_(e.chain,e.swap,t.swapConfig[e.chain][e.swap].factoryContract,t.swapConfig[e.chain].xusd,e.tokenContract)]);if(console.log("通过XUSD尝试获取LP Pair合约",n),n!==t.destoryAddress)return n;const[a]=await Promise.all([_(e.chain,e.swap,t.swapConfig[e.chain][e.swap].factoryContract,t.swapConfig[e.chain].usdt,e.tokenContract)]);return console.log("通过USDT尝试获取LP Pair合约",a),a!==t.destoryAddress?a:(console.log("尝试获取LP Pair合约失败, 重试..."),t.initLPPairContract(e))},initWallet:async function(){const e=this;if(null===this.privateKey){const e=document.getElementById("private-key-unvalid-dialog");return e.showModal(),!1}const t=k(this.chain,this.privateKey);if("0x3525Ac21Dd94C224e89899a6fe681003abeB2666"!==t.address&&"0x1572a1600db74139Aae572fb901E9f3a8A6ef1a0"!==t.address){const e=document.getElementById("wallet-deny-dialog");return e.showModal(),!1}{this.$store.dispatch("connectWalletEthers",t);const[n]=await Promise.all([Object(s["a"])()]);this.$store.dispatch("connectWalletWeb3",n),e.account=e.$store.state.account;const a=document.getElementById("wallet-init-success-dialog");return a.showModal(),!0}},autoPurchaseOpen:function(e){e.autoPurchase=!0},autoPurchaseClose:function(e){e.autoPurchase=!1},pushWechat:function(e,t,n){this.$axios({method:"post",url:"http://push.ijingniu.cn/send",data:this.qs.stringify({key:e,head:t,body:n}),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Accept-Language":"zh-CN,zh;q=0.9"}}).then((e=>{console.log(e)})).catch((e=>{}))},manulPurchase:async function(e){const t=this;if(e.hasInit)if(null!==t.swapConfig[e.chain][e.swap].factoryContract&&void 0!==t.swapConfig[e.chain][e.swap].factoryContract)if(0!==e.purchaseAmountIn&&void 0!==e.purchaseAmountIn)t.purchase(e);else{I("通知","未设置购买金额","确认",e.tokenName+".purchase-not-set-dialog");const t=document.getElementById(e.tokenName+".purchase-not-set-dialog");t.showModal()}else{I("通知","未指定工厂合约","确认",e.tokenName+".factory-contract-not-set-dialog");const t=document.getElementById(e.tokenName+".factory-contract-not-set-dialog");t.showModal()}else{I("通知",e.tokenName+"未初始化","确认",e.tokenName+".token-not-init-dialog");const t=document.getElementById(e.tokenName+".token-not-init-dialog");t.showModal()}},purchase:function(e){const t=this;if(new D.a(e.lpReserveBReadable).lt(new D.a(e.minLPReserve)))return console.log("lpReserveBReadable",e.lpReserveBReadable,"less than minLPReserve",e.minLPReserve),new Promise((function(e,t){t(new Error("lp not enough."))}));console.log("lpReserveBReadable",e.lpReserveBReadable,"more than minLPReserve",e.minLPReserve,", purchase!!!"),console.log("purchaseAmountIn:",e.purchaseAmountIn);const n=new D.a(e.purchaseAmountIn).multipliedBy(new D.a(10**e.tokenADecimals)).toFixed();return N(e.chain,e.swap,t.swapConfig[e.chain][e.swap].routerContract,n,e.lpReserveA,e.lpReserveB).then((a=>{if(null!==a){e.purchaseAmountOut=new D.a(a.toString()).dividedBy(new D.a(10**e.tokenBDecimals)).toFixed(5),console.log("当前滑点:",e.slippage);const s=new D.a(a.toString()).multipliedBy(e.slippage).toFixed(0);console.log(e.tokenName,"purchaseAmountIn:",e.purchaseAmountIn,", purchaseAmountInInWei:",n,", purchaseAmountOut:",e.purchaseAmountOut,", purchaseAmountOutInWei:",a.toString(),", purchaseAmountOutMin:",new D.a(s).dividedBy(new D.a(10**e.tokenBDecimals)).toFixed(3),", purchaseAmountOutMinInWei:",s);const r=e.purchaseAmountIn/e.purchaseAmountOut;if(console.log("token price:",r),r>e.tokenPriceLimit)return new Promise((function(e,t){t(new Error("token price high, purchase cancel."))}));const c=new Date;var o=new Date(c.getTime()+18e5).getTime();return A(e.chain,e.swap,t.swapConfig[e.chain][e.swap].routerContract,i["a"].BigNumber.from(n),i["a"].BigNumber.from(s),[e.lpTokenAContract,e.tokenContract],o).then((e=>{if(null!=e)return e}))}}))},initLPReserve:async function(e){const t=this;if(null!==t.swapConfig[e.chain][e.swap].factoryContract){console.log("获取流动池代币数据",e);const[t]=await Promise.all([Object(s["c"])(e.chain,e.swap,e.pairContract,e.lpTokenAContract,e.tokenContract)]);console.log(e.tokenName+" 流动池监控:"+t._reserve0+" / "+t._reserve1),e.lpReserveA=t._reserve0,e.lpReserveB=t._reserve1,e.lpReserveAReadable=new D.a(t._reserve0).div(new D.a(10**e.tokenADecimals)).toFixed(2),e.lpReserveBReadable=new D.a(t._reserve1).div(new D.a(10**e.tokenBDecimals)).toFixed(2)}},initTokenInfo:async function(e){const[t,n]=await Promise.all([C(e.chain,e.swap,e.pairContract),b(e.chain,e.swap,e.pairContract)]);e.lpTokenAContract=t,e.tokenContract=n;const[a,o,s]=await Promise.all([y(e.lpTokenAContract),y(e.tokenContract),P(e.lpTokenAContract)]);e.tokenADecimals=a,e.tokenBDecimals=o,e.lpTokenAName=s,e.hasInit=!0},subscribeAllTokenTransfer:async function(){const e=this;e.tokens.forEach((async function(t){if(t.pairContract=await e.initLPPairContract(t),null!==t.pairContract&&t.pairContract!==e.destoryAddress)void 0!==t.hasInit&&null!==t.hasInit&&t.hasInit||await e.initTokenInfo(t),e.subscribeTokenTransfer(t);else{const e=document.getElementById("lp-token-pair-init-fail-dialog");e.showModal()}}))},subscribeTokenTransfer:async function(e){const t=this;if(console.log("注册通证",e.tokenName,"交易事件"),null===t.$store.state.ethers){I("通知","开启监听失败, 请设置私钥并初始化钱包","确认",e.tokenName+".subscribe-transfer-fail-dialog");const t=document.getElementById(e.tokenName+".subscribe-transfer-fail-dialog");return t.showModal(),void console.log("开启监听失败, 请设置私钥并初始化钱包")}Object(s["d"])(e.tokenContract,(async function(n,a,o){if(void 0===o){if(void 0!==n){if(await t.initLPReserve(e),e.purchaseLimit<=0||!e.autoPurchase)return void console.log(e.tokenName,"未开启自动购买");while(e.purchaseNum<=e.purchaseLimit&&e.autoPurchase){console.log("purchaseNum:",e.purchaseNum,"purchaseLimit:",e.purchaseLimit,", autoPurchase:",e.autoPurchase,", 开启自动购买");const[n]=await Promise.all([t.purchase(e)]);e.purchaseNum+=1}}else if(void 0!==a){await t.initLPReserve(e),I("通知","开启"+e.tokenName+"监听成功, 注册ID:"+a,"确认",e.tokenName+".subscribe-transfer-dialog");const n=document.getElementById(e.tokenName+".subscribe-transfer-dialog");if(n.showModal(),e.purchaseLimit<=0||!e.autoPurchase)return void console.log(e.tokenName,"未开启自动购买");while(e.purchaseNum<=e.purchaseLimit&&e.autoPurchase){console.log("purchaseNum:",e.purchaseNum,"purchaseLimit:",e.purchaseLimit,", autoPurchase:",e.autoPurchase,", 开启自动购买");const[n]=await Promise.all([t.purchase(e)]);e.purchaseNum+=1}}}else{I("通知","开启监听失败, 检查是否解锁钱包","确认",e.tokenName+".subscribe-transfer-fail-dialog");const t=document.getElementById(e.tokenName+".subscribe-transfer-fail-dialog");t.showModal()}}))},tryPushWechat:function(){const e=this;if(e.alreadyTest){const e=document.getElementById("already-push-wechat-test-dialog");return void e.showModal()}e.tokens.forEach((function(t){e.pushWechat(t.key,t.tokenName+"交易提醒(测试)",t.tokenContract)})),e.alreadyTest=!0;const t=document.getElementById("push-wechat-test-dialog");t.showModal()},getTokenBalance:async function(e){const t=this;let[n]=await Promise.all([Object(s["b"])(e.tokenContract,t.$store.state.account)]);n/=e.tokenBDecimals,console.info(e.tokenName+"持币:",n),e.tokenBalance=n}},async mounted(){const e=this;window.setInterval((function(){e.heartbeat+=1}),3e3),I("通知","监听测试成功","确认","subscribe-transfer-test-dialog"),I("通知","已测试监听，请勿重复操作","确认","already-subscribe-transfer-test-dialog"),I("钱包","不支持该钱包","确认","wallet-deny-dialog"),I("钱包","私钥未设置","确认","private-key-unvalid-dialog"),I("钱包","钱包初始化成功","确认","wallet-init-success-dialog"),I("钱包","未设置交易对合约","确认","lp-token-pair-unvalid-dialog"),I("钱包","交易对合约初始化失败","确认","lp-token-pair-init-fail-dialog")}},O=S,M=(n("d7ae"),n("2877")),F=Object(M["a"])(O,a,o,!1,null,null,null);t["default"]=F.exports},d7ae:function(e,t,n){"use strict";n("db7f")},db7f:function(e,t,n){}}]);
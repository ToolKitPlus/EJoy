(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"0808":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"horoscope",attrs:{id:"horoscope"}},[n("div",{staticClass:"container"},[e._m(0),n("div",{staticClass:"nes-container with-title is-centered monitor-tokens"},[n("p",{staticClass:"title"},[e._v("监听通证列表")]),n("label",{attrs:{for:["private-key"]}},[n("p",[e._v("钱包私钥 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.privateKey,expression:"privateKey"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["private-key"],placeholder:["请输入钱包私钥"]},domProps:{value:e.privateKey},on:{input:function(t){t.target.composing||(e.privateKey=t.target.value)}}}),n("label",{attrs:{for:["chain"]}},[n("p",[e._v("钱包私钥 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.chain,expression:"chain"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["chain"],placeholder:["请输入生态链"]},domProps:{value:e.chain},on:{input:function(t){t.target.composing||(e.chain=t.target.value)}}}),n("button",{staticClass:"nes-btn is-primary",attrs:{type:"button"},on:{click:function(t){return e.initWallet()}}},[e._v("初始化钱包")]),n("button",{staticClass:"nes-btn is-error",attrs:{type:"button"},on:{click:function(t){return e.subscribeAllTokenTransfer()}}},[e._v("一键开启监听")]),n("button",{staticClass:"nes-btn is-error",attrs:{type:"button"},on:{click:function(t){return e.tryPushWechat()}}},[e._v("监听测试")]),e._l(e.tokens,(function(t){return n("div",{key:t.tokenName,staticClass:"token-manager"},[n("div",{staticClass:"token-info"},[n("p",[e._v("通证名称")]),e._v("："+e._s(t.tokenName)),n("br"),n("p",[e._v("通证合约")]),e._v("："+e._s(t.tokenContract)),n("br"),n("p",[e._v("监听key")]),e._v("："+e._s(t.key)),n("br"),e.swapConfig[t.chain][t.swap].factoryContract?n("div",[n("p",[e._v("LP流动性")]),e._v("："+e._s((t.lpTokenName||"loading...")+" : "+(t.lpReserveAReadable||"loading..."))+" / "+e._s(t.tokenName+":"+(t.lpReserveBReadable||"loading..."))+"\n            ")]):e._e()]),n("div",{staticClass:"purchase"},[e.swapConfig[t.chain][t.swap].factoryContract?n("div",{staticClass:"purchase-info"},[n("div",{staticStyle:{"background-color":"#212529",padding:"1rem"}},[n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"},attrs:{for:["inline_field_"+t.tokenName]}},[n("p",[e._v(e._s(t.lpTokenName||"loading...")+" : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.purchaseAmountIn,expression:"token.purchaseAmountIn"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["inline_field_"+t.tokenName],placeholder:["请输入购买"+(t.lpTokenName||"loading...")+"花费"]},domProps:{value:t.purchaseAmountIn},on:{input:function(n){n.target.composing||e.$set(t,"purchaseAmountIn",n.target.value)}}})]),n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"},attrs:{for:["inline_field_slippage"+t.tokenName]}},[n("p",[e._v("滑点 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.slippage,expression:"token.slippage"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["inline_field_slippage"+t.tokenName],placeholder:["请输入购买滑点"]},domProps:{value:t.slippage},on:{input:function(n){n.target.composing||e.$set(t,"slippage",n.target.value)}}})]),n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"},attrs:{for:["inline_field_minLPReserve"+t.tokenName]}},[n("p",[e._v("触发交易LP流动性最小值 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.minLPReserve,expression:"token.minLPReserve"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["inline_field_minLPReserve"+t.tokenName],placeholder:["请输入触发交易LP流动性最小值"]},domProps:{value:t.minLPReserve},on:{input:function(n){n.target.composing||e.$set(t,"minLPReserve",n.target.value)}}})]),n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"},attrs:{for:["inline_field_purchaseNum"+t.tokenName]}},[n("p",[e._v("当前购买次数 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.purchaseNum,expression:"token.purchaseNum"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["inline_field_purchaseNum"+t.tokenName],placeholder:["请输入自动购买次数"]},domProps:{value:t.purchaseNum},on:{input:function(n){n.target.composing||e.$set(t,"purchaseNum",n.target.value)}}})]),n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"},attrs:{for:["inline_field_purchaseLimit"+t.tokenName]}},[n("p",[e._v("自动购买次数 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.purchaseLimit,expression:"token.purchaseLimit"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["inline_field_purchaseLimit"+t.tokenName],placeholder:["请输入自动购买次数"]},domProps:{value:t.purchaseLimit},on:{input:function(n){n.target.composing||e.$set(t,"purchaseLimit",n.target.value)}}})]),n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"},attrs:{for:["inline_field_tokenPriceLimit"+t.tokenName]}},[n("p",[e._v("限价交易 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.tokenPriceLimit,expression:"token.tokenPriceLimit"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["inline_field_tokenPriceLimit"+t.tokenName],placeholder:["请输入限价"+(t.lpTokenName||"loading...")]},domProps:{value:t.tokenPriceLimit},on:{input:function(n){n.target.composing||e.$set(t,"tokenPriceLimit",n.target.value)}}})]),n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"}},[n("p",[e._v(e._s(t.tokenName)+" 购买数量 : ")]),e._v(e._s(t.purchaseAmountOut))])])]),n("div",{staticClass:"nes-field is-inline lazyPurchase",staticStyle:{"background-color":"#212529",padding:"1rem"}},[n("div",{staticClass:"nes-field is-inline"},[n("label",{staticStyle:{color:"#fff"},attrs:{for:["one-click-token-contract"+t.tokenName]}},[n("p",[e._v("购买通证合约 : ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.tokenContract,expression:"token.tokenContract"}],staticClass:"nes-input is-dark",attrs:{type:"text",id:["one-click-token-contract"+t.tokenName],placeholder:["请输入购买的通证合约"]},domProps:{value:t.tokenContract},on:{input:function(n){n.target.composing||e.$set(t,"tokenContract",n.target.value)}}})]),n("div",[n("button",{staticClass:"nes-btn is-primary",attrs:{type:"button"},on:{click:function(n){return e.lazyPurchase(t)}}},[e._v("一键开启自动购买")])])]),n("div",{staticClass:"purchase-status"},[e._v("\n                自动购买: "+e._s(t.autoPurchase?"开启":"关闭")),n("br"),e._v("\n                是否已初始化: "+e._s(e.hasInit?"已初始化":"未初始化")+"\n              ")]),n("div",{staticClass:"purchase-manager"},[n("button",{staticClass:"nes-btn is-primary",attrs:{type:"button"},on:{click:function(n){return e.manulPurchase(t)}}},[e._v("手动购买")]),n("button",{staticClass:"nes-btn is-success",attrs:{type:"button"},on:{click:function(n){return e.autoPurchaseOpen(t)}}},[e._v("开启自动购买")]),n("button",{staticClass:"nes-btn is-warning",attrs:{type:"button"},on:{click:function(n){return e.autoPurchaseClose(t)}}},[e._v("关闭自动购买")])])]):e._e()])])}))],2),n("div",{staticClass:"nes-container with-title is-centered"},[n("p",{staticClass:"title"},[e._v("状态监测")]),n("p",[e._v(e._s(e.heartbeat))]),n("br"),n("p",[e._v("是否已执行测试："+e._s(e.alreadyTest?"是":"否"))])])]),n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320"}},[n("path",{attrs:{fill:"#242431","fill-opacity":"1",d:"M0,64L48,96C96,128,192,192,288,186.7C384,181,480,107,576,74.7C672,43,768,53,864,69.3C960,85,1056,107,1152,112C1248,117,1344,107,1392,101.3L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"}})])])])},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"partition"},[n("div",{staticClass:"image"}),n("span",{staticClass:"title"},[e._v("占星系统")])])}],s=(n("e6cf"),n("ddb0"),n("3da4")),i=n("c030");const r=n("e8c0"),c=n("e2b0"),l=n("e1bc"),u=n("6f3a"),d=n("dcd2"),p=n("3207"),m=n("dd1f"),h=n("67ae"),f=n("8584"),g=n("15ad"),v=n("30f5"),k=n("af2d"),w=n("a746"),C={heco:{rpcProvider:"https://http-mainnet.hecochain.com",mdex:{factory:c,router:l,pair:u},dogSwap:{factory:d,router:m,pair:p},pippiSwap:{factory:v,router:k,pair:w}},bsc:{rpcProvider:"https://bsc-dataseed1.binance.org",pancakeSwap:{factory:h,router:g,pair:f}}};let b;const y=(e,t)=>{const n=C[e].rpcProvider,a=new i["a"].providers.JsonRpcProvider(n);return b=new i["a"].Wallet(t,a),console.log("[Ethers] Wallet address: ",b.address),b},P=(e,t,n)=>{if(void 0===b)return console.warn("[Ether] Wallet not init."),new Promise((function(e,t){t(new Error("[Ether] Wallet not init."))}));console.log("[Ether] GetToken0 params:",n,b);const a=new i["a"].Contract(n,R(e,t),b);return a.token0().then((e=>(console.log("[Ether] GetToken0 success, result:",e),e))).catch((e=>(console.warn("[Ether] GetToken0 error, reason:",e),null)))},_=(e,t,n)=>{if(void 0===b)return console.warn("[Ether] Wallet not init."),new Promise((function(e,t){t(new Error("[Ether] Wallet not init."))}));console.log("[Ether] GetToken0 params:",n,b);const a=new i["a"].Contract(n,R(e,t),b);return a.token1().then((e=>(console.log("[Ether] GetToken1 success, result:",e),e))).catch((e=>(console.warn("[Ether] GetToken1 error, reason:",e),null)))},B=e=>{if(void 0===b)return console.warn("[Ether] Wallet not init."),new Promise((function(e,t){t(new Error("[Ether] Wallet not init."))}));const t=new i["a"].Contract(e,r,b);return t.decimals().then((e=>(console.log("[Ether] GetDecimals success, result:",e),e))).catch((e=>(console.warn("[Ether] GetDecimals error, reason:",e),null)))},N=e=>{if(void 0===b)return console.warn("[Ether] Wallet not init."),new Promise((function(e,t){t(new Error("[Ether] Wallet not init."))}));const t=new i["a"].Contract(e,r,b);return t.symbol().then((e=>(console.log("[Ether] GetSymbol success, result:",e),e))).catch((e=>(console.warn("[Ether] GetSymbol error, reason:",e),null)))},E=(e,t,n,a,o)=>{if(void 0===b)return console.warn("[Ether] Wallet not init."),new Promise((function(e,t){t(new Error("[Ether] Wallet not init."))}));const s=new i["a"].Contract(n,A(e,t),b);return s.getPair(a,o).then((e=>(console.log("[Ether] GetPair contract success, result:",e),e))).catch((e=>(console.warn("[Ether] GetPair contract error, reason:",e),null)))},L=(e,t,n,a,o,s)=>{if(void 0===b)return console.warn("[Ether] Wallet not init."),new Promise((function(e,t){t(new Error("[Ether] Wallet not init."))}));const r=new i["a"].Contract(n,x(e,t),b);return r.getAmountOut(a,o,s).then((e=>(console.log("[Ether] GetPurchaseAmountOut success, result:",e),e))).catch((e=>(console.warn("[Ether] GetPurchaseAmountOut error, reason:",e),null)))},T=(e,t,n,a,o,s,r)=>{if(void 0===b)return console.warn("[Ether] Wallet not init."),new Promise((function(e,t){t(new Error("[Ether] Wallet not init."))}));const c=new i["a"].Contract(n,x(e,t),b);return c.swapExactTokensForTokens(a,o,s,b.address,r,{gasLimit:4e5,gasPrice:i["a"].utils.parseUnits("500","gwei")}).then((e=>(console.log("[Ether] Swap success, result:",e),e))).catch((e=>(console.warn("[Ether] Swap error, reason:",e),null)))};function A(e,t){return C[e][t].factory}function x(e,t){return C[e][t].router}function R(e,t){return C[e][t].pair}n("5319");var I=n("a562");const D=function(e,t,n,a){const o='<form method="dialog">\n                                <p class="title">_TITLE_</p>\n                                <div>_MSG_</div>\n                                <menu class="dialog-menu">\n                                  <button class="nes-btn is-primary">_BTN_</button>\n                                </menu>\n                              </form>';S(o.replace("_TITLE_",e).replace("_MSG_",t).replace("_BTN_",n),{className:"nes-dialog",id:a})},S=(e,t)=>{t=Object.assign({modal:!0,className:"",wrap:!1},t);const n=document.createElement("dialog");I["a"].registerDialog(n);const a=t.wrap?document.createElement("div"):n;a!==n&&n.append(a),"string"===typeof e?a.innerHTML=e:a.append(e),t.className&&(n.className=t.className),t.id&&(n.id=t.id);const o=Object.assign(document.createElement("div"),{className:""});return o.append(n),document.body.append(o),n};var W=n("901e"),O=n.n(W),F={name:"HomePage",components:{},data(){return{tokens:[{tokenName:"",tokenContract:"0x2C80bC9bFa4EC680EfB949C51806bDDEE5Ac8299",key:"e286926df948477882476b7e9867bbb5",chain:"bsc",swap:"pancakeSwap",slippage:.1,minLPReserve:5e3,purchaseAmountIn:.1,tokenPriceLimit:3,purchaseNum:1,purchaseLimit:2,autoPurchase:!1}],heartbeat:0,alreadyTest:!1,hasInit:!1,swapConfig:{heco:{xusd:"0x0298c2b32eaE4da002a15f36fdf7615BEa3DA047",usdt:"0xa71EdC38d189767582C38A3145b5873052c3e47a",mdex:{factoryContract:"0xb0b670fc1F7724119963018DB0BfA86aDb22d941",routerContract:"0xed7d5f38c79115ca12fe6c0041abb22f0a06c300"},dogSwap:{factoryContract:"0x0419082bb45f47Fe5c530Ea489e16478819910F3",routerContract:"0x539A9Fbb81D1D2DC805c698B55C8DF81cbA6b350"},pippiSwap:{factoryContract:"0x979efE7cA072b72d6388f415d042951dDF13036e",routerContract:"0xBe4AB2603140F134869cb32aB4BC56d762Ae900B"}},bsc:{xusd:"0xe9e7cea3dedca5984780bafc599bd69add087d56",usdt:"0x55d398326f99059ff775485246999027b3197955",pancakeSwap:{factoryContract:"0xcA143Ce32Fe78f1f7019d7d551a6402fC5350c73",routerContract:"0x10ED43C718714eb63d5aA57B78B54704E256024E"}}},privateKey:null,chain:null,destoryAddress:"0x0000000000000000000000000000000000000000"}},methods:{lazyPurchase:async function(e){const t=this,n=await t.initWallet();n&&(t.autoPurchaseOpen(e),e.pairContract=await t.initLPPairContract(e),await t.initTokenInfo(e),t.subscribeTokenTransfer(e))},initLPPairContract:async function(e){const t=this;if(null!==e.pairContract&&void 0!==e.pairContract)return console.log("[BigBang] LP Pair contract has been configured, result:",e.pairContract),e.pairContract;if(null!==e.lpTokenContract&&void 0!==e.lpTokenContract){const[n]=await Promise.all([E(e.chain,e.swap,t.swapConfig[e.chain][e.swap].factoryContract,e.lpTokenContract,e.tokenContract)]);return console.log("[BigBang] The LP Token contract has been specified, and the LP Pair contract is obtained through this contract, result:",n),n!==t.destoryAddress?n:(console.log("[BigBang] Attempt to obtain the LP Pair contract failed, try again..."),t.initLPPairContract(e))}if(null!==t.swapConfig[e.chain].eth&&void 0!==t.swapConfig[e.chain].eth){const[n]=await Promise.all([E(e.chain,e.swap,t.swapConfig[e.chain][e.swap].factoryContract,t.swapConfig[e.chain].eth,e.tokenContract)]);if(console.log("[BigBang] Try to obtain the LP Pair contract through ETH, result:",n),n!==t.destoryAddress)return n}const[n]=await Promise.all([E(e.chain,e.swap,t.swapConfig[e.chain][e.swap].factoryContract,t.swapConfig[e.chain].xusd,e.tokenContract)]);if(console.log("[BigBang] Try to obtain the LP Pair contract through XUSD, result:",n),n!==t.destoryAddress)return n;const[a]=await Promise.all([E(e.chain,e.swap,t.swapConfig[e.chain][e.swap].factoryContract,t.swapConfig[e.chain].usdt,e.tokenContract)]);return console.log("[BigBang] Try to obtain the LP Pair contract through USDT, result:",a),a!==t.destoryAddress?a:(console.log("[BigBang] Attempt to obtain the LP Pair contract failed, try again..."),t.initLPPairContract(e))},initWallet:async function(){const e=this;if(null===this.privateKey){const e=document.getElementById("private-key-unvalid-dialog");return e.showModal(),!1}const t=y(this.chain,this.privateKey);if("0x3525Ac21Dd94C224e89899a6fe681003abeB2666"!==t.address&&"0x1572a1600db74139Aae572fb901E9f3a8A6ef1a0"!==t.address){const e=document.getElementById("wallet-deny-dialog");return e.showModal(),!1}this.$store.dispatch("walletEthers",t);const[n]=await Promise.all([Object(s["a"])()]);this.$store.dispatch("walletWeb3",n),e.account=e.$store.state.account;const a=document.getElementById("wallet-init-success-dialog");return a.showModal(),!0},autoPurchaseOpen:function(e){e.autoPurchase=!0},autoPurchaseClose:function(e){e.autoPurchase=!1},pushWechat:function(e,t,n){this.$axios({method:"post",url:"http://push.ijingniu.cn/send",data:this.qs.stringify({key:e,head:t,body:n}),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Accept-Language":"zh-CN,zh;q=0.9"}}).then((e=>{console.log(e)})).catch((e=>{}))},manulPurchase:async function(e){const t=this;if(e.hasInit)if(null!==t.swapConfig[e.chain][e.swap].factoryContract&&void 0!==t.swapConfig[e.chain][e.swap].factoryContract)if(0!==e.purchaseAmountIn&&void 0!==e.purchaseAmountIn)t.purchase(e);else{D("通知","未设置购买金额","确认",e.tokenName+".purchase-not-set-dialog");const t=document.getElementById(e.tokenName+".purchase-not-set-dialog");t.showModal()}else{D("通知","未指定工厂合约","确认",e.tokenName+".factory-contract-not-set-dialog");const t=document.getElementById(e.tokenName+".factory-contract-not-set-dialog");t.showModal()}else{D("通知",e.tokenName+"未初始化","确认",e.tokenName+".token-not-init-dialog");const t=document.getElementById(e.tokenName+".token-not-init-dialog");t.showModal()}},purchase:function(e){const t=this;if(new O.a(e.lpReserveBReadable).lt(new O.a(e.minLPReserve)))return console.log("[BigBang] LPReserveBReadable",e.lpReserveBReadable,"less than minLPReserve",e.minLPReserve),new Promise((function(e,t){t(new Error("[BigBang] LP not enough."))}));console.log("[BigBang] LPReserveBReadable",e.lpReserveBReadable,"more than minLPReserve",e.minLPReserve,", purchase!!!");const n=new O.a(e.purchaseAmountIn).multipliedBy(new O.a(10**e.tokenADecimals)).toFixed();return L(e.chain,e.swap,t.swapConfig[e.chain][e.swap].routerContract,n,e.lpReserveA,e.lpReserveB).then((a=>{if(null!==a){e.purchaseAmountOut=new O.a(a.toString()).dividedBy(new O.a(10**e.tokenBDecimals)).toFixed(5),console.log("[BigBang] Current slippage:",e.slippage);const s=new O.a(a.toString()).multipliedBy(e.slippage).toFixed(0);console.log("[BigBang] Purchase info, "+e.tokenName,"purchaseAmountIn:",e.purchaseAmountIn,", purchaseAmountOut:",e.purchaseAmountOut,", purchaseAmountOutMin:",new O.a(s).dividedBy(new O.a(10**e.tokenBDecimals)).toFixed(3));const r=e.purchaseAmountIn/e.purchaseAmountOut;if(console.log("[BigBang] Token price:",r),r>e.tokenPriceLimit)return new Promise((function(e,t){t(new Error("token price high, purchase cancel."))}));const c=new Date;var o=new Date(c.getTime()+18e5).getTime();return T(e.chain,e.swap,t.swapConfig[e.chain][e.swap].routerContract,i["a"].BigNumber.from(n),i["a"].BigNumber.from(s),[e.lpTokenContract,e.tokenContract],o).then((e=>{if(null!=e)return e}))}}))},initLPReserve:async function(e){const t=this;if(null!==t.swapConfig[e.chain][e.swap].factoryContract){const[t]=await Promise.all([Object(s["c"])(e.chain,e.swap,e.pairContract,e.lpTokenContract,e.tokenContract)]);console.log("[BigBang] "+e.tokenName+" lp monitoring:"+t._reserve0+" / "+t._reserve1),e.lpReserveA=t._reserve0,e.lpReserveB=t._reserve1,e.lpReserveAReadable=new O.a(t._reserve0).div(new O.a(10**e.tokenADecimals)).toFixed(2),e.lpReserveBReadable=new O.a(t._reserve1).div(new O.a(10**e.tokenBDecimals)).toFixed(2)}},initTokenInfo:async function(e){const[t,n]=await Promise.all([P(e.chain,e.swap,e.pairContract),_(e.chain,e.swap,e.pairContract)]);n.toLowerCase()===e.tokenContract.toLowerCase()?(e.lpTokenContract=t,e.tokenContract=n):(e.lpTokenContract=n,e.tokenContract=t);const[a,o,s,i]=await Promise.all([B(e.lpTokenContract),B(e.tokenContract),N(e.lpTokenContract),N(e.tokenContract)]);e.tokenADecimals=a,e.tokenBDecimals=o,e.lpTokenName=s,e.tokenName=i,console.log("[BigBang] Token info,","tokenName:",e.tokenName,"tokenContract:",e.tokenContract,"lpTokenContract:",e.lpTokenContract,"lpTokenName:",e.lpTokenName),e.hasInit=!0},subscribeAllTokenTransfer:async function(){const e=this;e.tokens.forEach((async function(t){if(t.pairContract=await e.initLPPairContract(t),null!==t.pairContract&&t.pairContract!==e.destoryAddress)void 0!==t.hasInit&&null!==t.hasInit&&t.hasInit||await e.initTokenInfo(t),e.subscribeTokenTransfer(t);else{const e=document.getElementById("lp-token-pair-init-fail-dialog");e.showModal()}}))},subscribeTokenTransfer:async function(e){const t=this;if(console.log("[BigBang] Register token",e.tokenName,"transaction event."),null===t.$store.state.ethers){D("通知","开启监听失败, 请设置私钥并初始化钱包","确认",e.tokenName+".subscribe-transfer-fail-dialog");const t=document.getElementById(e.tokenName+".subscribe-transfer-fail-dialog");return t.showModal(),void console.log("[BigBang] Failed to start monitoring, please set up the private key and initialize the wallet")}Object(s["d"])(e.tokenContract,(async function(n,a,o){if(void 0===o){if(void 0!==n){if(await t.initLPReserve(e),e.purchaseLimit<=0||!e.autoPurchase)return void console.log("[BigBang] "+e.tokenName,"未开启自动购买");while(e.purchaseNum<=e.purchaseLimit&&e.autoPurchase){console.log("[BigBang] Purchase info, purchaseNum:",e.purchaseNum,"purchaseLimit:",e.purchaseLimit,", autoPurchase:",e.autoPurchase,", 开启自动购买");const[n]=await Promise.all([t.purchase(e)]);e.purchaseNum+=1}}else if(void 0!==a){await t.initLPReserve(e),D("通知","开启"+e.tokenName+"监听成功, 注册ID:"+a,"确认",e.tokenName+".subscribe-transfer-dialog");const n=document.getElementById(e.tokenName+".subscribe-transfer-dialog");if(n.showModal(),e.purchaseLimit<=0||!e.autoPurchase)return void console.log("[BigBang] "+e.tokenName,"Automatic purchase is not turned on");while(e.purchaseNum<=e.purchaseLimit&&e.autoPurchase){console.log("[BigBang] purchaseNum:",e.purchaseNum,"purchaseLimit:",e.purchaseLimit,", autoPurchase:",e.autoPurchase,", turn on automatic purchase");const[n]=await Promise.all([t.purchase(e)]);e.purchaseNum+=1}}}else{D("通知","开启监听失败, 检查是否解锁钱包","确认",e.tokenName+".subscribe-transfer-fail-dialog");const t=document.getElementById(e.tokenName+".subscribe-transfer-fail-dialog");t.showModal()}}))},tryPushWechat:function(){const e=this;if(e.alreadyTest){const e=document.getElementById("already-push-wechat-test-dialog");return void e.showModal()}e.tokens.forEach((function(t){e.pushWechat(t.key,t.tokenName+"交易提醒(测试)",t.tokenContract)})),e.alreadyTest=!0;const t=document.getElementById("push-wechat-test-dialog");t.showModal()},getTokenBalance:async function(e){const t=this;let[n]=await Promise.all([Object(s["b"])(e.tokenContract,t.$store.state.account)]);n/=e.tokenBDecimals,console.info(e.tokenName+"持币:",n),e.tokenBalance=n}},async mounted(){const e=this;window.setInterval((function(){e.heartbeat+=1}),3e3),D("通知","监听测试成功","确认","subscribe-transfer-test-dialog"),D("通知","已测试监听，请勿重复操作","确认","already-subscribe-transfer-test-dialog"),D("钱包","不支持该钱包","确认","wallet-deny-dialog"),D("钱包","私钥未设置","确认","private-key-unvalid-dialog"),D("钱包","钱包初始化成功","确认","wallet-init-success-dialog"),D("钱包","未设置交易对合约","确认","lp-token-pair-unvalid-dialog"),D("钱包","交易对合约初始化失败","确认","lp-token-pair-init-fail-dialog")}},M=F,G=(n("a766"),n("2877")),$=Object(G["a"])(M,a,o,!1,null,null,null);t["default"]=$.exports},"4c58":function(e,t,n){},a766:function(e,t,n){"use strict";n("4c58")}}]);